{"code":"ECONNREFUSED","level":"error","message":"Failed to connect to Redis:","service":"incident-log-api","stack":"AggregateError [ECONNREFUSED]: \n    at internalConnectMultiple (node:net:1122:18)\n    at afterConnectMultiple (node:net:1689:7)","timestamp":"2025-04-24 23:30:20"}
{"code":"ECONNREFUSED","level":"error","message":"Failed to connect to Redis:","service":"incident-log-api","stack":"AggregateError [ECONNREFUSED]: \n    at internalConnectMultiple (node:net:1122:18)\n    at afterConnectMultiple (node:net:1689:7)","timestamp":"2025-04-25 00:04:25"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'incidents'","service":"incident-log-api","timestamp":"2025-04-25 00:04:25"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_incidents_severity' GROUP BY 1","service":"incident-log-api","timestamp":"2025-04-25 00:04:25"}
{"level":"debug","message":"Executing (default): DO 'BEGIN CREATE TYPE \"public\".\"enum_incidents_severity\" AS ENUM(''Low'', ''Medium'', ''High''); EXCEPTION WHEN duplicate_object THEN null; END';","service":"incident-log-api","timestamp":"2025-04-25 00:04:25"}
{"code":"ECONNREFUSED","level":"error","message":"Failed to connect to Redis:","service":"incident-log-api","stack":"AggregateError [ECONNREFUSED]: \n    at internalConnectMultiple (node:net:1122:18)\n    at afterConnectMultiple (node:net:1689:7)","timestamp":"2025-04-25 00:06:02"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'incidents'","service":"incident-log-api","timestamp":"2025-04-25 00:06:02"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_incidents_severity' GROUP BY 1","service":"incident-log-api","timestamp":"2025-04-25 00:06:02"}
{"level":"debug","message":"Executing (default): DO 'BEGIN CREATE TYPE \"public\".\"enum_incidents_severity\" AS ENUM(''Low'', ''Medium'', ''High''); EXCEPTION WHEN duplicate_object THEN null; END';","service":"incident-log-api","timestamp":"2025-04-25 00:06:02"}
{"code":"ECONNREFUSED","level":"error","message":"Failed to connect to Redis:","service":"incident-log-api","stack":"AggregateError [ECONNREFUSED]: \n    at internalConnectMultiple (node:net:1122:18)\n    at afterConnectMultiple (node:net:1689:7)","timestamp":"2025-04-25 00:09:42"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'incidents'","service":"incident-log-api","timestamp":"2025-04-25 00:09:42"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_incidents_severity' GROUP BY 1","service":"incident-log-api","timestamp":"2025-04-25 00:09:42"}
{"level":"debug","message":"Executing (default): DO 'BEGIN CREATE TYPE \"public\".\"enum_incidents_severity\" AS ENUM(''Low'', ''Medium'', ''High''); EXCEPTION WHEN duplicate_object THEN null; END';","service":"incident-log-api","timestamp":"2025-04-25 00:09:42"}
{"code":"ECONNREFUSED","level":"error","message":"Failed to connect to Redis:","service":"incident-log-api","stack":"AggregateError [ECONNREFUSED]: \n    at internalConnectMultiple (node:net:1122:18)\n    at afterConnectMultiple (node:net:1689:7)","timestamp":"2025-04-25 00:10:02"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'incidents'","service":"incident-log-api","timestamp":"2025-04-25 00:10:02"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_incidents_severity' GROUP BY 1","service":"incident-log-api","timestamp":"2025-04-25 00:10:02"}
{"level":"debug","message":"Executing (default): DO 'BEGIN CREATE TYPE \"public\".\"enum_incidents_severity\" AS ENUM(''Low'', ''Medium'', ''High''); EXCEPTION WHEN duplicate_object THEN null; END';","service":"incident-log-api","timestamp":"2025-04-25 00:10:02"}
{"level":"info","message":"Redis client connected successfully","service":"incident-log-api","timestamp":"2025-04-25 00:12:02"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'incidents'","service":"incident-log-api","timestamp":"2025-04-25 00:12:02"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_incidents_severity' GROUP BY 1","service":"incident-log-api","timestamp":"2025-04-25 00:12:02"}
{"level":"debug","message":"Executing (default): DO 'BEGIN CREATE TYPE \"public\".\"enum_incidents_severity\" AS ENUM(''Low'', ''Medium'', ''High''); EXCEPTION WHEN duplicate_object THEN null; END';","service":"incident-log-api","timestamp":"2025-04-25 00:12:02"}
{"level":"info","message":"Redis client connected successfully","service":"incident-log-api","timestamp":"2025-04-25 00:14:04"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'incidents'","service":"incident-log-api","timestamp":"2025-04-25 00:14:04"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_incidents_severity' GROUP BY 1","service":"incident-log-api","timestamp":"2025-04-25 00:14:04"}
{"level":"debug","message":"Executing (default): DO 'BEGIN CREATE TYPE \"public\".\"enum_incidents_severity\" AS ENUM(''Low'', ''Medium'', ''High''); EXCEPTION WHEN duplicate_object THEN null; END';","service":"incident-log-api","timestamp":"2025-04-25 00:14:04"}
{"level":"info","message":"Redis client connected successfully","service":"incident-log-api","timestamp":"2025-04-25 00:28:08"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'incidents'","service":"incident-log-api","timestamp":"2025-04-25 00:28:08"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_incidents_severity' GROUP BY 1","service":"incident-log-api","timestamp":"2025-04-25 00:28:08"}
{"level":"debug","message":"Executing (default): DO 'BEGIN CREATE TYPE \"public\".\"enum_incidents_severity\" AS ENUM(''Low'', ''Medium'', ''High''); EXCEPTION WHEN duplicate_object THEN null; END';","service":"incident-log-api","timestamp":"2025-04-25 00:28:08"}
{"level":"info","message":"Redis client connected successfully","service":"incident-log-api","timestamp":"2025-04-25 00:29:01"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'incidents'","service":"incident-log-api","timestamp":"2025-04-25 00:29:01"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_incidents_severity' GROUP BY 1","service":"incident-log-api","timestamp":"2025-04-25 00:29:01"}
{"level":"debug","message":"Executing (default): DO 'BEGIN CREATE TYPE \"public\".\"enum_incidents_severity\" AS ENUM(''Low'', ''Medium'', ''High''); EXCEPTION WHEN duplicate_object THEN null; END';","service":"incident-log-api","timestamp":"2025-04-25 00:29:01"}
{"level":"debug","message":"Executing (default): WITH ranges AS (  SELECT pg_range.rngtypid, pg_type.typname AS rngtypname,         pg_type.typarray AS rngtyparray, pg_range.rngsubtype    FROM pg_range LEFT OUTER JOIN pg_type ON pg_type.oid = pg_range.rngtypid)SELECT pg_type.typname, pg_type.typtype, pg_type.oid, pg_type.typarray,       ranges.rngtypname, ranges.rngtypid, ranges.rngtyparray  FROM pg_type LEFT OUTER JOIN ranges ON pg_type.oid = ranges.rngsubtype WHERE (pg_type.typtype IN('b', 'e'));","service":"incident-log-api","timestamp":"2025-04-25 00:29:01"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS \"incidents\" (\"id\"  SERIAL , \"title\" VARCHAR(200) NOT NULL, \"description\" TEXT NOT NULL, \"severity\" \"public\".\"enum_incidents_severity\" NOT NULL, \"reported_at\" TIMESTAMP WITH TIME ZONE NOT NULL, \"createdAt\" TIMESTAMP WITH TIME ZONE NOT NULL, \"updatedAt\" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY (\"id\"));","service":"incident-log-api","timestamp":"2025-04-25 00:29:01"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'incidents' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"incident-log-api","timestamp":"2025-04-25 00:29:01"}
{"level":"info","message":"::1 - - [24/Apr/2025:19:01:24 +0000] \"GET / HTTP/1.1\" 404 139 \"-\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36\"","service":"incident-log-api","timestamp":"2025-04-25 00:31:24"}
{"level":"info","message":"::1 - - [24/Apr/2025:19:03:57 +0000] \"GET /health HTTP/1.1\" 200 45 \"-\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36\"","service":"incident-log-api","timestamp":"2025-04-25 00:33:57"}
{"level":"info","message":"::1 - - [24/Apr/2025:19:03:58 +0000] \"GET /favicon.ico HTTP/1.1\" 404 150 \"-\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36\"","service":"incident-log-api","timestamp":"2025-04-25 00:33:58"}
{"level":"debug","message":"Executing (default): SELECT \"id\", \"title\", \"description\", \"severity\", \"reported_at\", \"createdAt\", \"updatedAt\" FROM \"incidents\" AS \"incident\";","service":"incident-log-api","timestamp":"2025-04-25 00:34:09"}
{"level":"error","message":"Error retrieving incidents: permission denied for table incidents","service":"incident-log-api","timestamp":"2025-04-25 00:34:09"}
{"level":"error","message":"Error: permission denied for table incidents, Stack: Error\n    at Query.run (/home/adil/Desktop/Assignemnt/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /home/adil/Desktop/Assignemnt/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.select (/home/adil/Desktop/Assignemnt/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async incident.findAll (/home/adil/Desktop/Assignemnt/node_modules/sequelize/lib/model.js:1140:21)\n    at async exports.findAll (/home/adil/Desktop/Assignemnt/controllers/incident.controller.js:74:12)","service":"incident-log-api","timestamp":"2025-04-25 00:34:09"}
{"level":"info","message":"::1 - - [24/Apr/2025:19:04:09 +0000] \"GET /incidents HTTP/1.1\" 500 736 \"-\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36\"","service":"incident-log-api","timestamp":"2025-04-25 00:34:09"}
{"level":"debug","message":"Executing (default): SELECT \"id\", \"title\", \"description\", \"severity\", \"reported_at\", \"createdAt\", \"updatedAt\" FROM \"incidents\" AS \"incident\";","service":"incident-log-api","timestamp":"2025-04-25 00:35:58"}
{"level":"error","message":"Error retrieving incidents: permission denied for table incidents","service":"incident-log-api","timestamp":"2025-04-25 00:35:58"}
{"level":"error","message":"Error: permission denied for table incidents, Stack: Error\n    at Query.run (/home/adil/Desktop/Assignemnt/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /home/adil/Desktop/Assignemnt/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.select (/home/adil/Desktop/Assignemnt/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async incident.findAll (/home/adil/Desktop/Assignemnt/node_modules/sequelize/lib/model.js:1140:21)\n    at async exports.findAll (/home/adil/Desktop/Assignemnt/controllers/incident.controller.js:74:12)","service":"incident-log-api","timestamp":"2025-04-25 00:35:58"}
{"level":"info","message":"::1 - - [24/Apr/2025:19:05:58 +0000] \"GET /incidents HTTP/1.1\" 500 736 \"-\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36\"","service":"incident-log-api","timestamp":"2025-04-25 00:35:58"}
{"level":"info","message":"Redis client connected successfully","service":"incident-log-api","timestamp":"2025-04-25 00:45:26"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'incidents'","service":"incident-log-api","timestamp":"2025-04-25 00:45:26"}
{"level":"debug","message":"Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_incidents_severity' GROUP BY 1","service":"incident-log-api","timestamp":"2025-04-25 00:45:26"}
{"level":"debug","message":"Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'incidents' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;","service":"incident-log-api","timestamp":"2025-04-25 00:45:26"}
{"level":"debug","message":"Executing (default): SELECT \"id\", \"title\", \"description\", \"severity\", \"reported_at\", \"createdAt\", \"updatedAt\" FROM \"incidents\" AS \"incident\";","service":"incident-log-api","timestamp":"2025-04-25 00:45:29"}
{"level":"info","message":"Retrieved all incidents","service":"incident-log-api","timestamp":"2025-04-25 00:45:29"}
{"level":"info","message":"::1 - - [24/Apr/2025:19:15:29 +0000] \"GET /incidents HTTP/1.1\" 200 836 \"-\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36\"","service":"incident-log-api","timestamp":"2025-04-25 00:45:29"}
{"level":"debug","message":"Executing (default): SELECT \"id\", \"title\", \"description\", \"severity\", \"reported_at\", \"createdAt\", \"updatedAt\" FROM \"incidents\" AS \"incident\";","service":"incident-log-api","timestamp":"2025-04-25 01:12:48"}
{"level":"info","message":"Retrieved all incidents","service":"incident-log-api","timestamp":"2025-04-25 01:12:48"}
{"level":"info","message":"::1 - - [24/Apr/2025:19:42:48 +0000] \"GET /incidents HTTP/1.1\" 200 836 \"-\" \"PostmanRuntime/7.43.3\"","service":"incident-log-api","timestamp":"2025-04-25 01:12:48"}
{"level":"debug","message":"Executing (default): SELECT \"id\", \"title\", \"description\", \"severity\", \"reported_at\", \"createdAt\", \"updatedAt\" FROM \"incidents\" AS \"incident\" WHERE \"incident\".\"id\" = '1';","service":"incident-log-api","timestamp":"2025-04-25 01:13:50"}
{"level":"info","message":"Retrieved incident with id=1","service":"incident-log-api","timestamp":"2025-04-25 01:13:50"}
{"level":"info","message":"::1 - - [24/Apr/2025:19:43:50 +0000] \"GET /incidents/1 HTTP/1.1\" 200 290 \"-\" \"PostmanRuntime/7.43.3\"","service":"incident-log-api","timestamp":"2025-04-25 01:13:50"}
{"level":"debug","message":"Executing (default): INSERT INTO \"incidents\" (\"id\",\"title\",\"description\",\"severity\",\"reported_at\",\"createdAt\",\"updatedAt\") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6) RETURNING \"id\",\"title\",\"description\",\"severity\",\"reported_at\",\"createdAt\",\"updatedAt\";","service":"incident-log-api","timestamp":"2025-04-25 01:14:52"}
{"level":"info","message":"Created new incident with ID: 4","service":"incident-log-api","timestamp":"2025-04-25 01:14:52"}
{"level":"info","message":"::1 - - [24/Apr/2025:19:44:52 +0000] \"POST /incidents HTTP/1.1\" 201 214 \"-\" \"PostmanRuntime/7.43.3\"","service":"incident-log-api","timestamp":"2025-04-25 01:14:52"}
{"level":"debug","message":"Executing (default): SELECT \"id\", \"title\", \"description\", \"severity\", \"reported_at\", \"createdAt\", \"updatedAt\" FROM \"incidents\" AS \"incident\";","service":"incident-log-api","timestamp":"2025-04-25 01:15:02"}
{"level":"info","message":"Retrieved all incidents","service":"incident-log-api","timestamp":"2025-04-25 01:15:02"}
{"level":"info","message":"::1 - - [24/Apr/2025:19:45:02 +0000] \"GET /incidents HTTP/1.1\" 200 1051 \"-\" \"PostmanRuntime/7.43.3\"","service":"incident-log-api","timestamp":"2025-04-25 01:15:02"}
{"level":"debug","message":"Executing (default): DELETE FROM \"incidents\" WHERE \"id\" = '4'","service":"incident-log-api","timestamp":"2025-04-25 01:15:06"}
{"level":"info","message":"Deleted incident with id=4","service":"incident-log-api","timestamp":"2025-04-25 01:15:06"}
{"level":"info","message":"::1 - - [24/Apr/2025:19:45:06 +0000] \"DELETE /incidents/4 HTTP/1.1\" 200 67 \"-\" \"PostmanRuntime/7.43.3\"","service":"incident-log-api","timestamp":"2025-04-25 01:15:06"}
